import{S as $,i as tt,s as et,e as B,t as I,k as O,c as M,a as A,h as L,d as v,m as R,b as u,g as P,J as r,L as Y,K as Z,M as st,w as lt,x as at,y as nt,q as U,N as j,O as F,o as V,B as it,j as q,n as ot,p as rt,v as ct,P as ht,Q as ft,R as J,T as Q,U as dt}from"./vendor-f04a94a3.js";let[X,K]=[1,0,1,0];const ut=(c,t,e)=>{const{key:s,code:l}=c;if((s==="ArrowLeft"||l==="KeyA")&&t!==1)X=-1,K=0;else if((s==="ArrowRight"||l==="KeyD")&&t!==-1)X=1,K=0;else if((s==="ArrowUp"||l==="KeyW")&&e!==1)X=0,K=-1;else if((s==="ArrowDown"||l==="KeyS")&&e!==-1)X=0,K=1;else return[-1,-1];return[X,K]};class _t{constructor(t){this.data=t}}class vt{constructor(){this.length=0}push(t){const e=new _t(t);this.head?(this.tail.next=e,e.prev=this.tail,this.tail=e):(this.head=e,this.tail=e),this.length++}pop(){if(!this.head)return null;const t=this.tail;return this.tail=t.prev,this.tail?this.tail.next=null:this.head=null,this.length--,t.data}shift(){if(!this.head)return null;const t=this.head;return this.head=t.next,this.head?this.head.prev=null:this.tail=null,this.length--,t.data}peek(){var t,e;return(e=(t=this.tail)==null?void 0:t.data)!=null?e:null}peekHead(){var t,e;return(e=(t=this.head)==null?void 0:t.data)!=null?e:null}}const p={MAX_WIDTH:700,MAX_HEIGHT:800,MAX_W_SMALL:400,MAX_H_SMALL:500,BLOCK_SIZE:20,MARGIN:2,BWM:22,BG:"#7d7d7d",OUTLINE_COLOR:"#000000cd",SNAKE_COLOR:"#00ff00",FOOD_COLOR:"#970e0e",MPS:7,MPS_FAST:11};class pt{constructor(t,e,s,l){this.ctx=t,this.rows=e,this.cols=s,this.config=l,this.snakeBlocks=new vt,this.food=[-1,-1],this.grid=[],this.max=0,this.grid=Array(e).fill(0).map(()=>Array(s).fill(!1)),this.max=e*s;const n=Math.floor(s/2),a=Math.floor(e/2);this.snakeBlocks.push([n,a]),this.snakeBlocks.push([n-1,a])}get score(){return this.snakeBlocks.length-2}moveAndDraw(t,e){this.advanceHead(t,e),this.removeTail(),this.addFood()}advanceHead(t,e){const[s,l]=this.calcNextCoords(t,e),n=[s,l];this.snakeBlocks.push(n),this.grid[l][s]=!0,this.ctx.fillStyle=p.SNAKE_COLOR,this.drawBlock(n)}calcNextCoords(t,e){const s=this.snakeBlocks.peek(),[l,n]=s;if(this.config.infiniteBoard){const[d,h]=[l+t,n+e];return[d<0?this.cols-1:d>=this.cols?0:d,h<0?this.rows-1:h>=this.rows?0:h]}const[a,i]=[l+t,n+e];return[a,i]}removeTail(){if(this.ateFood())return;const t=this.snakeBlocks.shift();this.grid[t[1]][t[0]]=!1,this.ctx.fillStyle=p.BG,this.drawBlock(t)}ateFood(){const t=this.snakeBlocks.peek(),[e,s]=t;return this.food[0]===e&&this.food[1]===s?(this.food=[-1,-1],!0):!1}addFood(){if(this.food[0]!==-1)return;const[t,e]=this.getRandomCoords();this.food=[t,e],this.grid[e][t]=!0,this.ctx.fillStyle=p.FOOD_COLOR,this.drawBlock(this.food)}getRandomCoords(){if(this.max-this.snakeBlocks.length<10){for(let n=0;n<this.grid.length;n++)for(let a=0;a<this.grid[n].length;a++)if(!this.grid[n][a])return[a,n]}const s=Math.floor(Math.random()*this.cols),l=Math.floor(Math.random()*this.rows);return this.grid[l][s]?this.getRandomCoords():[s,l]}drawBlock([t,e]){const s=p.MARGIN+t*(p.MARGIN+p.BLOCK_SIZE),l=p.MARGIN+e*(p.MARGIN+p.BLOCK_SIZE);this.ctx.fillRect(s,l,p.BLOCK_SIZE,p.BLOCK_SIZE)}willCollide(t,e){const[s,l]=this.calcNextCoords(t,e),n=s<0||s>=this.cols||l<0||l>=this.rows,a=this.config.infiniteBoard?!1:n,i=!a&&this.grid[l][s],d=i&&this.food[0]!==s&&this.food[1]!==l;return a||i&&d}}function kt(c){let t,e,s,l,n,a,i,d,h,f,o,m,S,y;return{c(){t=B("div"),e=B("label"),s=B("input"),l=I(`
    Infinite Board`),n=O(),a=B("label"),i=B("input"),d=I(`
    Fast Snake`),h=O(),f=B("label"),o=B("input"),m=I(`
    Small Board`),this.h()},l(g){t=M(g,"DIV",{class:!0});var w=A(t);e=M(w,"LABEL",{for:!0,class:!0});var x=A(e);s=M(x,"INPUT",{name:!0,type:!0,class:!0}),l=L(x,`
    Infinite Board`),x.forEach(v),n=R(w),a=M(w,"LABEL",{for:!0,class:!0});var D=A(a);i=M(D,"INPUT",{name:!0,type:!0,class:!0}),d=L(D,`
    Fast Snake`),D.forEach(v),h=R(w),f=M(w,"LABEL",{for:!0,class:!0});var E=A(f);o=M(E,"INPUT",{name:!0,type:!0,class:!0}),m=L(E,`
    Small Board`),E.forEach(v),w.forEach(v),this.h()},h(){u(s,"name","infinite-board"),u(s,"type","checkbox"),u(s,"class","svelte-fn6oog"),u(e,"for","infinite-board"),u(e,"class","svelte-fn6oog"),u(i,"name","fast"),u(i,"type","checkbox"),u(i,"class","svelte-fn6oog"),u(a,"for","fast"),u(a,"class","svelte-fn6oog"),u(o,"name","small-board"),u(o,"type","checkbox"),u(o,"class","svelte-fn6oog"),u(f,"for","small-board"),u(f,"class","svelte-fn6oog"),u(t,"class","wrapper svelte-fn6oog")},m(g,w){P(g,t,w),r(t,e),r(e,s),s.checked=c[0].infiniteBoard,r(e,l),r(t,n),r(t,a),r(a,i),i.checked=c[0].fast,r(a,d),r(t,h),r(t,f),r(f,o),o.checked=c[0].smallBoard,r(f,m),S||(y=[Y(s,"change",c[1]),Y(i,"change",c[2]),Y(o,"change",c[3])],S=!0)},p(g,[w]){w&1&&(s.checked=g[0].infiniteBoard),w&1&&(i.checked=g[0].fast),w&1&&(o.checked=g[0].smallBoard)},i:Z,o:Z,d(g){g&&v(t),S=!1,st(y)}}}function mt(c,t,e){let{value:s}=t;function l(){s.infiniteBoard=this.checked,e(0,s)}function n(){s.fast=this.checked,e(0,s)}function a(){s.smallBoard=this.checked,e(0,s)}return c.$$set=i=>{"value"in i&&e(0,s=i.value)},[s,l,n,a]}class gt extends ${constructor(t){super();tt(this,t,mt,kt,et,{value:0})}}const{window:Bt}=ft;function z(c){let t,e,s,l,n,a,i;function d(o,m){return o[4]?wt:Mt}let h=d(c),f=h(c);return l=new gt({props:{value:c[5]}}),{c(){t=B("div"),e=B("div"),f.c(),s=O(),lt(l.$$.fragment),this.h()},l(o){t=M(o,"DIV",{class:!0});var m=A(t);e=M(m,"DIV",{class:!0});var S=A(e);f.l(S),s=R(S),at(l.$$.fragment,S),S.forEach(v),m.forEach(v),this.h()},h(){u(e,"class","modal svelte-14e0v2x"),u(t,"class","info svelte-14e0v2x")},m(o,m){P(o,t,m),r(t,e),f.m(e,null),r(e,s),nt(l,e,null),i=!0},p(o,m){h!==(h=d(o))&&(f.d(1),f=h(o),f&&(f.c(),f.m(e,s)))},i(o){i||(U(l.$$.fragment,o),j(()=>{n||(n=F(e,J,{y:200,duration:250},!0)),n.run(1)}),j(()=>{a||(a=F(t,Q,{duration:150},!0)),a.run(1)}),i=!0)},o(o){V(l.$$.fragment,o),n||(n=F(e,J,{y:200,duration:250},!1)),n.run(0),a||(a=F(t,Q,{duration:150},!1)),a.run(0),i=!1},d(o){o&&v(t),f.d(),it(l),o&&n&&n.end(),o&&a&&a.end()}}}function Mt(c){let t,e,s,l,n;return{c(){t=B("p"),e=I("Press "),s=B("kbd"),l=I("arrow keys"),n=I(" to start"),this.h()},l(a){t=M(a,"P",{});var i=A(t);e=L(i,"Press "),s=M(i,"KBD",{class:!0});var d=A(s);l=L(d,"arrow keys"),d.forEach(v),n=L(i," to start"),i.forEach(v),this.h()},h(){u(s,"class","svelte-14e0v2x")},m(a,i){P(a,t,i),r(t,e),r(t,s),r(s,l),r(t,n)},d(a){a&&v(t)}}}function wt(c){let t,e,s,l,n,a,i,d;return{c(){t=B("p"),e=I("You lost!"),s=O(),l=B("span"),n=I("Press "),a=B("kbd"),i=I("arrow keys"),d=I(" to restart"),this.h()},l(h){t=M(h,"P",{});var f=A(t);e=L(f,"You lost!"),f.forEach(v),s=R(h),l=M(h,"SPAN",{});var o=A(l);n=L(o,"Press "),a=M(o,"KBD",{class:!0});var m=A(a);i=L(m,"arrow keys"),m.forEach(v),d=L(o," to restart"),o.forEach(v),this.h()},h(){u(a,"class","svelte-14e0v2x")},m(h,f){P(h,t,f),r(t,e),P(h,s,f),P(h,l,f),r(l,n),r(l,a),r(a,i),r(l,d)},d(h){h&&v(t),h&&v(s),h&&v(l)}}}function At(c){let t,e,s,l,n,a,i,d,h,f,o=c[4]!=1?"points":"point",m,S,y,g,w,x,D,E,G,C,_=c[3]&&z(c);return{c(){t=B("title"),e=I("Snake Game"),s=O(),l=B("main"),n=B("h1"),a=I("Snake Game!"),i=O(),d=B("p"),h=I(c[4]),f=O(),m=I(o),S=O(),y=B("div"),g=B("canvas"),w=O(),x=B("div"),D=O(),_&&_.c(),this.h()},l(k){t=M(k,"TITLE",{});var b=A(t);e=L(b,"Snake Game"),b.forEach(v),s=R(k),l=M(k,"MAIN",{class:!0});var N=A(l);n=M(N,"H1",{});var T=A(n);a=L(T,"Snake Game!"),T.forEach(v),i=R(N),d=M(N,"P",{class:!0});var H=A(d);h=L(H,c[4]),f=R(H),m=L(H,o),H.forEach(v),S=R(N),y=M(N,"DIV",{class:!0});var W=A(y);g=M(W,"CANVAS",{width:!0,height:!0,class:!0}),A(g).forEach(v),w=R(W),x=M(W,"DIV",{class:!0}),A(x).forEach(v),W.forEach(v),D=R(N),_&&_.l(N),N.forEach(v),this.h()},h(){u(d,"class","score svelte-14e0v2x"),u(g,"width",c[1]),u(g,"height",c[2]),u(g,"class","svelte-14e0v2x"),u(x,"class","canvas-cover svelte-14e0v2x"),u(y,"class","canvas-wrapper svelte-14e0v2x"),u(l,"class","svelte-14e0v2x")},m(k,b){P(k,t,b),r(t,e),P(k,s,b),P(k,l,b),r(l,n),r(n,a),r(l,i),r(l,d),r(d,h),r(d,f),r(d,m),r(l,S),r(l,y),r(y,g),c[7](g),r(y,w),r(y,x),r(l,D),_&&_.m(l,null),E=!0,G||(C=Y(Bt,"keydown",c[6]),G=!0)},p(k,[b]){(!E||b&16)&&q(h,k[4]),(!E||b&16)&&o!==(o=k[4]!=1?"points":"point")&&q(m,o),(!E||b&2)&&u(g,"width",k[1]),(!E||b&4)&&u(g,"height",k[2]),k[3]?_?(_.p(k,b),b&8&&U(_,1)):(_=z(k),_.c(),U(_,1),_.m(l,null)):_&&(ot(),V(_,1,1,()=>{_=null}),rt())},i(k){E||(U(_),E=!0)},o(k){V(_),E=!1},d(k){k&&v(t),k&&v(s),k&&v(l),c[7](null),_&&_.d(),G=!1,C()}}}function St(c,t,e){let s,l,[n,a,i,d]=[200,200,!0,0],[h,f,o,m]=[1,0,1,0],S={infiniteBoard:!1,fast:!1,smallBoard:!1};function y(){const{smallBoard:C}=S,[_,k]=[Math.min(window.innerWidth,C?p.MAX_W_SMALL:p.MAX_WIDTH),Math.min(window.innerHeight,C?p.MAX_H_SMALL:p.MAX_HEIGHT)],b=Math.floor(_*.8/p.BWM),N=Math.floor(k*.8/p.BWM);e(1,n=Math.floor(b*p.BWM+p.MARGIN)),e(2,a=Math.floor(N*p.BWM+p.MARGIN));const T=s.getContext("2d");l=new pt(T,N,b,S)}function g(){const C=s.getContext("2d");C.fillStyle=p.BG,C.fillRect(0,0,n,a)}function w(){l.willCollide(o,m)&&(e(3,i=!0),clearInterval(x))}let x=null;function D(){y(),g(),x=setInterval(()=>{w(),i||(h=o,f=m,l.moveAndDraw(h,f),e(4,d=l.score))},1e3/(S.fast?p.MPS_FAST:p.MPS))}const E=C=>{const _=ut(C,h,f);_[0]===_[1]&&_[0]===-1||(i&&(e(3,i=!1),D()),o=_[0],m=_[1])};ct(()=>y()),ht(()=>clearInterval(x));function G(C){dt[C?"unshift":"push"](()=>{s=C,e(0,s)})}return[s,n,a,i,d,S,E,G]}class yt extends ${constructor(t){super();tt(this,t,St,At,et,{})}}export{yt as S};
