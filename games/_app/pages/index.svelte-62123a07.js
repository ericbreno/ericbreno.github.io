import{S as Z,i as V,s as j,e as v,c as g,a as w,d,b as A,g as C,t as x,k as O,h as D,m as R,J as u,L as q,j as Y,K as X,v as U,M as J,N as $,O as z,w as Q,x as tt,y as et,q as st,o as ot,B as lt}from"../chunks/vendor-4b56e108.js";let[N,H]=[1,0,1,0];const nt=(a,t,o)=>{const{key:s,code:e}=a;if((s==="ArrowLeft"||e==="KeyA")&&t!==1)N=-1,H=0;else if((s==="ArrowRight"||e==="KeyD")&&t!==-1)N=1,H=0;else if((s==="ArrowUp"||e==="KeyW")&&o!==1)N=0,H=-1;else if((s==="ArrowDown"||e==="KeyS")&&o!==-1)N=0,H=1;else return[-1,-1];return[N,H]},h={MAX_WIDTH:700,MAX_HEIGHT:800,BLOCK_SIZE:20,MARGIN:2,BWM:22,BG:"#7d7d7d",OUTLINE_COLOR:"#000000cd",SNAKE_COLOR:"#00ff00",FOOD_COLOR:"#970e0e",MPS:7};class it{constructor(t,o,s){this.ctx=t,this.rows=o,this.cols=s,this.blocks=[],this.food=[-1,-1],this.grid=[],this.max=0,this.grid=Array(o).fill(0).map(()=>Array(s).fill(!1)),this.max=o*s;const e=Math.floor(s/2),n=Math.floor(o/2);this.blocks.push([e,n],[e-1,n])}get score(){return this.blocks.length-2}moveAndDraw(t,o){this.advanceHead(t,o),this.removeTail(),this.addFood()}advanceHead(t,o){const s=this.blocks[this.blocks.length-1],[e,n]=s,[l,i]=[e+t,n+o],f=[l,i];this.blocks.push(f),this.grid[i][l]=!0,this.ctx.fillStyle=h.SNAKE_COLOR,this.drawBlock(f)}removeTail(){if(this.ateFood())return;const t=this.blocks.shift();this.grid[t[1]][t[0]]=!1,this.ctx.fillStyle=h.BG,this.drawBlock(t)}ateFood(){const t=this.blocks[this.blocks.length-1],[o,s]=t;return this.food[0]===o&&this.food[1]===s?(this.food=[-1,-1],!0):!1}addFood(){if(this.food[0]!==-1)return;const[t,o]=this.getRandomCoords();this.food=[t,o],this.grid[o][t]=!0,this.ctx.fillStyle=h.FOOD_COLOR,this.drawBlock(this.food)}getRandomCoords(){if(this.max-this.blocks.length<10){for(let n=0;n<this.grid.length;n++)for(let l=0;l<this.grid[n].length;l++)if(!this.grid[n][l])return[l,n]}const s=Math.floor(Math.random()*this.cols),e=Math.floor(Math.random()*this.rows);return this.grid[e][s]?this.getRandomCoords():[s,e]}drawBlock([t,o]){const s=h.MARGIN+t*(h.MARGIN+h.BLOCK_SIZE),e=h.MARGIN+o*(h.MARGIN+h.BLOCK_SIZE);this.ctx.fillRect(s,e,h.BLOCK_SIZE,h.BLOCK_SIZE)}willCollide(t,o){const s=this.blocks[this.blocks.length-1],[e,n]=s,[l,i]=[e+t,n+o],f=l<0||l>=this.cols||i<0||i>=this.rows,k=!f&&this.grid[i][l],I=k&&this.food[0]!==l&&this.food[1]!==i;return f||k&&I}}const{window:rt}=$;function F(a){let t;function o(n,l){return n[4]?ct:at}let s=o(a),e=s(a);return{c(){t=v("div"),e.c(),this.h()},l(n){t=g(n,"DIV",{class:!0});var l=w(t);e.l(l),l.forEach(d),this.h()},h(){A(t,"class","info")},m(n,l){C(n,t,l),e.m(t,null)},p(n,l){s!==(s=o(n))&&(e.d(1),e=s(n),e&&(e.c(),e.m(t,null)))},d(n){n&&d(t),e.d()}}}function at(a){let t,o;return{c(){t=v("p"),o=x("Press arrow keys to start")},l(s){t=g(s,"P",{});var e=w(t);o=D(e,"Press arrow keys to start"),e.forEach(d)},m(s,e){C(s,t,e),u(t,o)},d(s){s&&d(t)}}}function ct(a){let t,o,s,e,n;return{c(){t=v("p"),o=x("You lost"),s=O(),e=v("p"),n=x("Press arrow keys to restart")},l(l){t=g(l,"P",{});var i=w(t);o=D(i,"You lost"),i.forEach(d),s=R(l),e=g(l,"P",{});var f=w(e);n=D(f,"Press arrow keys to restart"),f.forEach(d)},m(l,i){C(l,t,i),u(t,o),C(l,s,i),C(l,e,i),u(e,n)},d(l){l&&d(t),l&&d(s),l&&d(e)}}}function ht(a){let t,o,s,e,n,l,i,f,k,I,S=a[4]!=1?"points":"point",b,G,M,m,E,B,L,K,p,r=a[3]&&F(a);return{c(){t=v("title"),o=x("Snake Game"),s=O(),e=v("main"),n=v("h1"),l=x("Snake Game!"),i=O(),f=v("p"),k=x(a[4]),I=O(),b=x(S),G=O(),M=v("div"),m=v("canvas"),E=O(),B=v("div"),L=O(),r&&r.c(),this.h()},l(c){t=g(c,"TITLE",{});var _=w(t);o=D(_,"Snake Game"),_.forEach(d),s=R(c),e=g(c,"MAIN",{class:!0});var y=w(e);n=g(y,"H1",{});var T=w(n);l=D(T,"Snake Game!"),T.forEach(d),i=R(y),f=g(y,"P",{class:!0});var P=w(f);k=D(P,a[4]),I=R(P),b=D(P,S),P.forEach(d),G=R(y),M=g(y,"DIV",{class:!0});var W=w(M);m=g(W,"CANVAS",{width:!0,height:!0,class:!0}),w(m).forEach(d),E=R(W),B=g(W,"DIV",{class:!0}),w(B).forEach(d),W.forEach(d),L=R(y),r&&r.l(y),y.forEach(d),this.h()},h(){A(f,"class","score svelte-1c0gr5f"),A(m,"width",a[1]),A(m,"height",a[2]),A(m,"class","svelte-1c0gr5f"),A(B,"class","canvas-cover svelte-1c0gr5f"),A(M,"class","canvas-wrapper svelte-1c0gr5f"),A(e,"class","svelte-1c0gr5f")},m(c,_){C(c,t,_),u(t,o),C(c,s,_),C(c,e,_),u(e,n),u(n,l),u(e,i),u(e,f),u(f,k),u(f,I),u(f,b),u(e,G),u(e,M),u(M,m),a[6](m),u(M,E),u(M,B),u(e,L),r&&r.m(e,null),K||(p=q(rt,"keydown",a[5]),K=!0)},p(c,[_]){_&16&&Y(k,c[4]),_&16&&S!==(S=c[4]!=1?"points":"point")&&Y(b,S),_&2&&A(m,"width",c[1]),_&4&&A(m,"height",c[2]),c[3]?r?r.p(c,_):(r=F(c),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:X,o:X,d(c){c&&d(t),c&&d(s),c&&d(e),a[6](null),r&&r.d(),K=!1,p()}}}function ft(a,t,o){let s,e=200,n=200,l,i=!0,f=0,k=1,I=0,S=1,b=0;function G(){const[p,r]=[Math.min(window.innerWidth,h.MAX_WIDTH),Math.min(window.innerHeight,h.MAX_HEIGHT)],c=Math.floor(p*.8/h.BWM),_=Math.floor(r*.8/h.BWM);o(1,e=Math.floor(c*h.BWM+h.MARGIN)),o(2,n=Math.floor(_*h.BWM+h.MARGIN));const y=s.getContext("2d");l=new it(y,_,c)}function M(){const p=s.getContext("2d");p.fillStyle=h.BG,p.fillRect(0,0,e,n)}function m(){l.willCollide(S,b)&&(o(3,i=!0),clearInterval(E))}let E=null;function B(){G(),M(),E=setInterval(()=>{m(),i||(k=S,I=b,l.moveAndDraw(k,I),o(4,f=l.score))},1e3/h.MPS)}const L=p=>{const r=nt(p,k,I);r[0]===r[1]&&r[0]===-1||(i&&(o(3,i=!1),B()),S=r[0],b=r[1])};U(()=>{G()}),J(()=>{clearInterval(E)});function K(p){z[p?"unshift":"push"](()=>{s=p,o(0,s)})}return[s,e,n,i,f,L,K]}class dt extends Z{constructor(t){super();V(this,t,ft,ht,j,{})}}function ut(a){let t,o;return t=new dt({}),{c(){Q(t.$$.fragment)},l(s){tt(t.$$.fragment,s)},m(s,e){et(t,s,e),o=!0},p:X,i(s){o||(st(t.$$.fragment,s),o=!0)},o(s){ot(t.$$.fragment,s),o=!1},d(s){lt(t,s)}}}class mt extends Z{constructor(t){super();V(this,t,null,ut,j,{})}}export{mt as default};
